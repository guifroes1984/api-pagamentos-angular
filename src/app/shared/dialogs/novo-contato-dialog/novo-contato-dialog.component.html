<div class="dialog-container">
  <div class="dialog-header bg-primary text-white py-3 rounded-top">
    <div class="row align-items-center">
      <div class="col">
        <h1 class="h3 mb-0 fw-bold">
          <i class="bi bi-person me-2"></i>
          {{ editando ? 'Editando Contato: ' + contatoForm.get('nome')?.value : 'Novo Contato' }}
        </h1>
      </div>
      <div class="col-auto">
        <button type="button" class="btn-close btn-close-white" (click)="cancelar()" aria-label="Close"></button>
      </div>
    </div>
  </div>

  <div class="dialog-body p-4">
    <form [formGroup]="contatoForm" (ngSubmit)="confirmar()" autocomplete="new-password">

      <div class="row mb-3">
        <div class="col-12">
          <label class="form-label fw-semibold">Nome</label>
          <div class="input-group">
            <span class="input-group-text">
              <i class="bi bi-person"></i>
            </span>
            <input type="text" class="form-control" formControlName="nome" autocomplete="new-password"
                   [class.is-invalid]="contatoForm.get('nome')?.invalid && contatoForm.get('nome')?.touched"
                   placeholder="Digite o nome completo">
          </div>
          <div class="invalid-feedback d-block" *ngIf="contatoForm.get('nome')?.hasError('required') && contatoForm.get('nome')?.touched">
            <i class="bi bi-exclamation-triangle-fill me-1"></i>
            Informe o nome
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-12">
          <label class="form-label fw-semibold">E-mail</label>
          <div class="input-group">
            <span class="input-group-text">
              <i class="bi bi-envelope"></i>
            </span>
            <input type="email" class="form-control" formControlName="email" autocomplete="new-password"
                   [class.is-invalid]="(contatoForm.get('email')?.invalid && contatoForm.get('email')?.touched) || contatoForm.get('email')?.hasError('email')"
                   placeholder="exemplo@email.com">
          </div>
          <div class="invalid-feedback d-block" *ngIf="contatoForm.get('email')?.hasError('required') && contatoForm.get('email')?.touched">
            <i class="bi bi-exclamation-triangle-fill me-1"></i>
            Informe o e-mail
          </div>
          <div class="invalid-feedback d-block" *ngIf="contatoForm.get('email')?.hasError('email') && contatoForm.get('email')?.touched">
            <i class="bi bi-exclamation-triangle-fill me-1"></i>
            Informe um e-mail válido
          </div>
        </div>
      </div>

      <div class="row mb-4">
        <div class="col-12">
          <label class="form-label fw-semibold">Telefone</label>
          <div class="input-group">
            <span class="input-group-text">
              <i class="bi bi-telephone"></i>
            </span>
            <input type="text" class="form-control" formControlName="telefone" 
                   (input)="ajustarMascaraTelefone()" 
                   [mask]="maskTelefone"
                   [dropSpecialCharacters]="false" 
                   autocomplete="new-password"
                   placeholder="(00) 00000-0000">
          </div>
          <div class="form-text">Formato: (00) 00000-0000</div>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <div class="d-flex gap-2 flex-column flex-md-row border-top pt-4">
            <button type="submit" class="btn btn-primary"
                    [disabled]="!contatoForm.valid || !telefoneValido(contatoForm.get('telefone')?.value)">
              <i class="bi {{ editando ? 'bi-check-circle' : 'bi-plus-circle' }} me-2"></i>
              {{ editando ? 'Salvar alterações' : 'Confirmar' }}
            </button>
            
            <button type="button" class="btn btn-outline-danger" (click)="cancelar()">
              <i class="bi bi-x-circle me-2"></i>
              Cancelar
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>